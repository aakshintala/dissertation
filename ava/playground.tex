%!TEX root = ../dissertation.tex

\section*{Playground}

\subsection{CUDA Runtime API}

While most popular computing frameworks have open API documentations,
CUDA runtime API is extraordinary with several undocumented internal APIs.
The input CUDA program is pre-processed for host and device compilation by NVCC,
the NVIDIA compiler,
which inserts internal APIs such as \lstinline|__cudaRegisterFatBinary|
and \lstinline|__cudaRegisterFunction| and generates host kernel stubs to register and
launch the CUDA device kernels.
The device kernel code is also compiled to CUDA binary and/or PTX intermediate code,
and embedded into the host code's binary object.

We managed to virtualize CUDA~10 runtime API with substantial reverse engineering efforts
to understand those internal APIs and data structures.
Additional utilities are needed to support some of the APIs:
for example, the kernel launch APIs (e.g., \lstinline|cudaLaunchKernel|)
requires the kernel's argument information to transport the argument list from the guest library to the \worker.
\AvA calls the external \lstinline|cuobjdump| tool to parse the extracted CUDA binary,
which can be done by embedding a PTX parser alternatively.

\hyu{Detailed process:
When \lstinline|__cudaRegisterFatBinary| is called and forwarded from guest,
the fat binary wrapped in the argument is also copied to \worker.
Both guest library and \worker dump the fat binary into a temporary file (\lstinline|/tmp/fatbin.cubin|),
and invoke \lstinline|cuobjdump| to parse CUDA kernel functions from the dumped binary.
Then guest library and \worker both get the functions' argument sizes,
and use this information to transfer the arguments of kernel launch APIs.
Guest library must know the size information to marshal those arguments,
but it can send the sizes as implicit (contextual) arguments to \worker,
avoiding \worker from executing the external \lstinline|cuobjdump| program.
}

\subsection{TensorFlow}

We explored two solutions to support TensorFlow Python API with \AvA:
virtualizing the topmost TensorFlow classes,
or virtualizing the underlying CUDA runtime and driver APIs.
Table~\ref{tab:tensorflow_cmp} summarizes these methods' properties,
which also demonstrates the performance difference between API virtualizations at different layers.
In addition, we encountered three major problems when virtualizing the underlying CUDA APIs for TensorFlow:

\paragraphbe{TensorFlow and its third-party libraries mix the use of CUDA dynamic and static libraries.}
We modified a few TensorFlow build scripts to link the CUDA libraries dynamically
in order to intercept the CUDA APIs with the generated guest library.

\paragraphbe{Some tensors are required to be aligned (to 64-bytes by default).}
Some host pinned buffers are used as vectorizable Eigen objects which requires specific alignment for the sake of performance.

\paragraphbe{Remoting all function registration APIs is inefficient.}
About 10,000 CUDA kernel functions are registered at the TensorFlow library's loading by \lstinline|__cudaRegisterFunction|.
Remoting all those APIs leads to tens of seconds overheads.
To speed up the library loading, we dump and pre-process the fat binaries and the registration APIs,
enabling the \worker to load and register the functions without remoting any \lstinline|__cudaRegisterFunction| APIs.

\begin{table}[!thp]
	\centering
	\begin{tabular}{l|l|l}
		& By Python class & By CUDA API \\ \hline
		Auto-generated & No   & Yes \\ \hline
		Modified files & None & 5 build scripts \\ \hline
		Debuggability  & Easy & Moderate \\ \hline
		Performance    & Close-to-native & 3.4x avg. overhead \\ \hline
	\end{tabular}
	\caption{Comparisons between TensorFlow Python API virtualization methods.}
	\label{tab:tensorflow_cmp}
\end{table}

\begin{comment}

\subsection{Old Development Effort}

A key benefit of \AvA's para-virtual API-remoting approach is that the development effort required to support new APIs or devices is trivial.
A developer using \AvA need only be familiar with the high-level user-facing APIs,
and is spared the trouble of dealing with low-level hardware drivers or the device ISA.

The authors' experience in building several API remoting systems demonstrates that
\AvA is able to shorten the development cycle of virtualizing an API from scratch from several developer-months to a number of developer-days:

\paragraphbe{Lines of code.}
The authors built an API remoting system for a core set of OpenCL manually with X LOC in total,
though the system was much less mature compared with \AvA.
We rebuilt the OpenCL virtualization of the same set of APIs with \AvA with 850 LOC of the API specification,
and 20,000 LOC were generated automatically for the API-specific components.
We virtualized a core set of TensorFlow API manually on top of the \AvA's API-agnostic components,
requiring 2,000 lines of Python code for TensorFlow class wrappers and dynamic member remoting.

\paragraphbe{Development time.}
The manually built OpenCL virtualization exposed tens of bugs in the API argument marshaling, data transport, and resource management during the development.
Overall, the handiwork took the authors more than three months to build and test.
However, rebuilding the system with \AvA cost a single developer slightly over a week,
while most code bugs were found in the specification \hyu{I left a confusing sentence here. Bugs mean the error in the source of spec. @AA please help fix it}.
The development time was saved significantly for the TensorFlow support as well:
writing API wrappers and Python object marshaling took about two developer weeks,
and most were only engineering efforts.

%OpenCL was the first API that we tried to virtualize from the \CAvA-generated guidance,
%and it exposed tens of bugs in \CAvA and \AvA system.
%These led us to refine the specification for near twenty times,
%and improve \CAvA as well as the annotation language.
We optimized \CAvA and introduced new features when we supported new APIs and accelerators with \AvA.
\AvA has been increasingly mature in the iterations,
and the annotation syntax has become more like C language's.
According to multiple \AvA users' feedbacks,
minimal developer intervention is now needed to virtualize an API framework with the current \AvA prototype,
even if they are new to \AvA and \CAvA language:
one virtualized a core set of HIP API in about ten days.

%\AvA also supports incremental change to the specification when the API is updated.
%\CAvA is able to warn any mismatches between the annotated API and latest version,
%and developers only need to update a few lines of specifications empirically.

\AvA can be ported to other hypervisors and operating systems easily.
For example, \AvA was initially developed on Linux kernel 4.9 LTS and NVIDIA Pascal GPU cards.
Porting it to Linux kernel 4.14 required changing fewer than 10~LOC.
%We ran the aforementioned OpenCl benchmarks on AMD Radeon RX 580 and Vega via ROCm~1.7 OpenCL,
%and found the overheads to be in line with the results obtained on NVIDIA hardware.

\begin{table*}
	\centering
	\resizebox{.85\textwidth}{!} {
		\footnotesize
		\begin{tabular}{|l|c|c|c|c|c|}
			\hline
			\textbf{Virtualized API} & \textbf{\# of APIs} & \textbf{\# of days for initial spec} & \textbf{\# of bugs} & \textbf{\# of refinements} & \textbf{\# of commits} \\ \hline
			OpenCL                   & 40                  & 3                                    & 20                  & 16                         & 50+ \\ \hline
			NCSDK                    & 25                  & 1                                    & 4                   & 4                          & 9   \\ \hline
			CUDA                     & 15                  & 2                                    & 3                   & 5                          & 11  \\ \hline
			Tensorflow C API         & 47                  & 2                                    & 3                   & 4                          & 8   \\ \hline
			Tensorflow Python API    &                     &                                      &                     &                            & \\ \hline
			QuickAssist              &                     &                                      &                     &                            & \\ \hline
			HIP                      &                     &                                      &                     &                            & \\ \hline
			FPGA application API     &                     &                                      &                     &                            & \\ \hline
		\end{tabular}
	}
	\caption{API virtualization effort during \AvA development iterations. \hyu{Add it back for Chris to have a look}}
	\label{table:effort}
\end{table*}


\begin{table}
    \footnotesize
    \newcolumntype{\T}{S[table-format=2.2, table-alignment = right, table-auto-round = true]}
    \newcolumntype{\Tm}{S[table-format=1.2, table-alignment = right, table-auto-round = true, table-omit-exponent, fixed-exponent=3]}
    \newcolumntype{\R}{>{\text{(}}S[table-format=1.2, table-alignment = right, table-auto-round = true, bracket-numbers, table-space-text-pre = (, table-space-text-post = )]<{\text{)}}}
    \def\rotdeg{20}
    \newcolumntype{R}[2]{%
      >{\hfill\adjustbox{angle=#1,lap=\width-(#2)}\bgroup}%
      l%
      <{\egroup\hfill}%
    }
    \newcommand*\rotlabel{\multicolumn{1}{R{\rotdeg}{2em}}}
    \newcommand*\rotkind[2]{\multirow{#1}{*}{\begin{adjustbox}{angle=90}#2\end{adjustbox}}}
    \setlength{\tabcolsep}{4pt}
    % >{\columncolor{Gray}}
		\begin{tabular}{lr\T\T\R\T\R}
	\toprule
                                    & {Application} & \rotlabel{Native} & \rotlabel{SHM} & {$\times$}   & \rotlabel{SHM Async} & {$\times$}   \\
	\midrule
\rotkind{15}{OpenCL on NV}          & backprop      & 1.595             & 1.70167        & 1.066877743  & 1.69                 & 1.059561129  \\
                                    & bfs           & 0.555             & 0.579167       & 1.043544144  & 0.5675               & 1.022522523  \\
                                    & b+tree        & 2.50833           & 2.87917        & 1.147843386  & 2.83                 & 1.128240702  \\
                                    & dwt2d         & 0.470833          & 0.531667       & 1.129205047  & 0.513333             & 1.090265551  \\
                                    & gaussian      & 1.7725            & 1.935          & 1.09167842   & 1.82333              & 1.02867701   \\
                                    & heartwall     & 4.445             & 5.1075         & 1.14904387   & 5.09417              & 1.146044994  \\
                                    & hybridsort    & 0.935             & 1.0325         & 1.104278075  & 1.0175               & 1.088235294  \\
                                    & kmeans        & 7.69667           & 8.11333        & 1.0541351    & 8.08917              & 1.05099608   \\
                                    & lavaMD        & 7.02              & 7.0475         & 1.003917379  & 6.9875               & 0.9953703704 \\
                                    & lud           & 16.0058           & 15.9867        & 0.9988066826 & 16.0142              & 1.00052481   \\
                                    & myocyte       & 9.07917           & 22.4958        & 2.477737502  & 18.5533              & 2.043501774  \\
                                    & nn            & 0.249167          & 0.256667       & 1.030100294  & 0.254167             & 1.020066863  \\
                                    & nw            & 0.644167          & 0.6575         & 1.020698049  & 0.655833             & 1.018110211  \\
                                    & pathfinder    & 1.32167           & 1.4625         & 1.106554586  & 1.4225               & 1.076289845  \\
                                    & srad          & 1.17833           & 1.245          & 1.056580075  & 1.20333              & 1.021216467  \\
          \hline
\rotkind{15}{OpenCL on AMD}         & backprop      & 1.78083           &                &              & 1.6585               & 0.9313073118 \\
                                    & bfs           & 0.700833          &                &              & 0.5765               & 0.8225925434 \\
                                    & b+tree        & 2.6475            &                &              & 2.6175               & 0.9886685552 \\
                                    & dwt2d         & 1.5775            &                &              & 1.575                & 0.9984152139 \\
                                    & gaussian      & 30.7325           &                &              & 30.6795              & 0.9982754413 \\
                                    & heartwall     & 10.785            &                &              & 10.988               & 1.018822439  \\
                                    & hybridsort    & 1.495             &                &              & 1.491                & 0.9973244147 \\
                                    & kmeans        & 8.7425            &                &              & 8.7                  & 0.9951386903 \\
                                    & lavaMD        & 10.9967           &                &              & 10.9755              & 0.9980721489 \\
                                    & lud           & 22.8333           &                &              & 22.7895              & 0.998081749  \\
                                    & myocyte       & 26.835            &                &              & 41.3055              & 1.539239799  \\
                                    & nn            & 0.603333          &                &              & 0.493                & 0.8171275233 \\
                                    & nw            & 1.62083           &                &              & 1.562                & 0.9637037814 \\
                                    & pathfinder    & 1.485             &                &              & 1.4005               & 0.9430976431 \\
                                    & srad          & 1.8525            &                &              & 1.8195               & 0.9821862348 \\
          \hline
\rotkind{11}{CUDA on NV\phantom{p}} & backprop      & 1.29833           & 1.4475         & 1.114893748  & 1.38833            & 1.069319819  \\
                                    & bfs           & 0.58              & 0.598333       & 1.031608621  & 0.56083            & 0.9669534483 \\
                                    & gaussian      & 1.585             & 1.69167        & 1.067299685  & 1.63833            & 1.033646688  \\
                                    & heartwall     & 7.1675            & 7.8425         & 1.094175096  & 7.80667            & 1.089176142  \\
                                    & hotspot       & 1.0575            & 1.09333        & 1.033881797  & 1.0575             & 1.           \\
                                    & lud           & 0.756667          & 0.773333       & 1.022025541  & 0.7375             & 0.9746691742 \\
                                    & needle        & 1.1675            & 1.18333        & 1.013558887  & 1.13667            & 0.9735931478 \\
                                    & nn            & 0.2125            & 0.22           & 1.035294118  & 0.18416            & 0.8666682353 \\
                                    & pathfinder    & 1.03667           & 1.13           & 1.090028649  & 1.09583            & 1.057067341  \\
                                    & srad\_v1      & 1.11833           & 1.16875        & 1.045085082  & 1.12889            & 1.009442651  \\
                                    & srad\_v2      & 1.18667           & 1.27889        & 1.077713265  & 1.25833            & 1.060387471  \\
          \bottomrule
		\end{tabular}
        \caption{End-to-end performance data of OpenCL and CUDA in seconds. Numbers in parentheses are relative to native.
          Memory allocation and shutdown times are all less than \SI{0.06}{\second} and where omitted to save space.
          For other APIs we only have the data in Figure~\ref{fig:end2end}.
          The breakdown indicates the elapsed time for different types of API (in the application on the native).
          \hyu{I'll measure missing data for AMD-CL and redraw the table if we really need it.}
        }
\end{table}

\begin{table*}
  \begin{adjustbox}{angle=90}
    \tiny
    \newcolumntype{\T}{S[table-format=4.1, table-alignment = right, table-auto-round = true]}
    \def\rotdeg{30}
    \newcolumntype{R}[2]{%
      >{\hfill\adjustbox{angle=#1,lap=\width-(#2)}\bgroup}%
      l%
      <{\egroup\hfill}%
    }
    \newcommand*\rotlabel{\multicolumn{1}{R{\rotdeg}{2em}}}
    % \setlength{\tabcolsep}{4pt}
		\begin{tabular}{ll\T\T\T\T\T\T\T\T\T\T\T\T\T\T\T\T\T}
                          & {Application} & \rotlabel{Init} & \rotlabel{MemAlloc} & \rotlabel{HtoD} & \rotlabel{Exec} & \rotlabel{DtoH} & \rotlabel{Close} & \rotlabel{Total} & \rotlabel{End2end (s)} & \rotlabel{Total (shm)} & \rotlabel{End2end (shm)} & \rotlabel{Relative (shm)} & \rotlabel{Total (shm+async)} & \rotlabel{End2end (shm+async)} & \rotlabel{Relative (shm+async)} \\
\multirow{15}{*}{CL+NV}   & backprop      & 157.896         & 0.029083            & 7.02097         & 1289.12         & 2.57939         & 0.946667         & 1473.65          & 1.595                  & 1555.76                & 1.70167                  & 1.066877743               & 1544.62                      & 1.69                           & 1.059561129                     \\
                          & bfs           & 161.988         & 1.17917             & 0.952932        & 284.033         & 0.132782        & 0.0000833        & 449.553          & 0.555                  & 496.174                & 0.579167                 & 1.043544144               & 484.825                      & 0.5675                         & 1.022522523                     \\
                          & b+tree        & 135.345         & 0.00675             & 6.26817         & 884.279         & 0.077917        & 64.8114          & 1248.1           & 2.50833                & 1318.38                & 2.87917                  & 1.147843386               & 1264.18                      & 2.83                           & 1.128240702                     \\
                          & dwt2d         & 168.001         & 11.2356             & 0               & 242.383         & 1.91367         & 1.06883          & 437.423          & 0.470833               & 526.571                & 0.531667                 & 1.129205047               & 509.773                      & 0.513333                       & 1.090265551                     \\
                          & gaussian      & 164.528         & 0.0045              & 4.69728         & 1554.38         & 3.24875         & 0.730417         & 1736.48          & 1.7725                 & 1928.17                & 1.935                    & 1.09167842                & 1817.01                      & 1.82333                        & 1.02867701                      \\
                          & heartwall     & 165.972         & 0.0205              & 17.5619         & 4116.86         & 0.006939        & 1.94658          & 4413.66          & 4.445                  & 5103.92                & 5.1075                   & 1.14904387                & 5089.2                       & 5.09417                        & 1.146044994                     \\
                          & hybridsort    & 435.878         & 0.035833            & 4.58862         & 312.67          & 1.80629         & 1.49267          & 766.194          & 0.935                  & 916.783                & 1.0325                   & 1.104278075               & 901.28                       & 1.0175                         & 1.088235294                     \\
                          & kmeans        & 155.413         & 0.003667            & 13.4702         & 5770.5          & 7.88702         & 5.86725          & 7662.97          & 7.69667                & 8108.83                & 8.11333                  & 1.0541351                 & 8084.35                      & 8.08917                        & 1.05099608                      \\
                          & lavaMD        & 164.731         & 0.003667            & 4.61271         & 6750.72         & 2.08246         & 37.7421          & 6960.71          & 7.02                   & 6948.62                & 7.0475                   & 1.003917379               & 6889.13                      & 6.9875                         & 0.9953703704                    \\
                          & lud           & 161.986         & 0.002               & 2.30253         & 15796.7         & 3.12142         & 0.221833         & 15964.8          & 16.0058                & 15968.1                & 15.9867                  & 0.9988066826              & 15995.7                      & 16.0142                        & 1.00052481                      \\
                          & myocyte       & 169.055         & 0.003833            & 25.7127         & 7820.44         & 42.1461         & 0.205583         & 4028.78          & 9.07917                & 22435.1                & 22.4958                  & 2.477737502               & 18497.2                      & 18.5533                        & 2.043501774                     \\
                          & nn            & 164.402         & 0.002833            & 0.030419        & 45.6724         & 0.013856        & 0.230917         & 212.459          & 0.249167               & 227.074                & 0.256667                 & 1.030100294               & 227.081                      & 0.254167                       & 1.020066863                     \\
                          & nw            & 161.1           & 0.005               & 1.3943          & 440.698         & 1.64313         & 0.5375           & 606.007          & 0.644167               & 644.916                & 0.6575                   & 1.020698049               & 643.779                      & 0.655833                       & 1.018110211                     \\
                          & pathfinder    & 155.335         & 0.006167            & 5.73775         & 1007.33         & 0.159958        & 35.2291          & 1204.21          & 1.32167                & 1263.17                & 1.4625                   & 1.106554586               & 1221.8                       & 1.4225                         & 1.076289845                     \\
                          & srad          & 162.876         & 0.01025             & 0.408325        & 961.707         & 0.411929        & 32.2643          & 1158.32          & 1.17833                & 1215.69                & 1.245                    & 1.056580075               & 1176.43                      & 1.20333                        & 1.021216467                     \\
          \hline
\multirow{15}{*}{CL+AMD}  & backprop      & 382.229         & 1.85975             & 12.9845         & 1028.37         & 4.84124         & 1.02325          & 1454.1           & 1.78083                &                        &                          &                           & 1515.52                      & 1.6585                         & 0.9313073118                    \\
                          & bfs           & 375.478         & 7.48167             & 2.93073         & 22.7809         & 0.914268        & 0.0000833        & 410.817          & 0.700833               &                        &                          &                           & 497.1                        & 0.5765                         & 0.8225925434                    \\
                          & b+tree        & 76.0043         & 0.991917            & 11.6017         & 727.017         & 0.549833        & 2.07775          & 1200.55          & 2.6475                 &                        &                          &                           & 1217.67                      & 2.6175                         & 0.9886685552                    \\
                          & dwt2d         & 888.795         & 22.0967             & 0               & 451.425         & 3.01392         & 1.26833          & 1388.74          & 1.5775                 &                        &                          &                           & 1568.29                      & 1.575                          & 0.9984152139                    \\
                          & gaussian      & 378.349         & 1.45817             & 8.40092         & 30113.6         & 6.00746         & 1.15175          & 30521.7          & 30.7325                &                        &                          &                           & 30669.7                      & 30.6795                        & 0.9982754413                    \\
                          & heartwall     & 776.704         & 2.93092             & 57.8468         & 9220.17         & 0.983459        & 2.36142          & 10597.7          & 10.785                 &                        &                          &                           & 10983.0                      & 10.988                         & 1.018822439                     \\
                          & hybridsort    & 588.51          & 0.835667            & 13.7655         & 566.424         & 6.44224         & 3.18508          & 1186.53          & 1.495                  &                        &                          &                           & 1376.59                      & 1.491                          & 0.9973244147                    \\
                          & kmeans        & 401.758         & 8.1535              & 22.0984         & 6112.95         & 17.9981         & 1.82708          & 8554.16          & 8.7425                 &                        &                          &                           & 8697.2                       & 8.7                            & 0.9951386903                    \\
                          & lavaMD        & 386.295         & 1.89383             & 8.96112         & 10283.3         & 2.88675         & 1.33842          & 10685.2          & 10.9967                &                        &                          &                           & 10877.9                      & 10.9755                        & 0.9980721489                    \\
                          & lud           & 985.605         & 0.7535              & 7.00382         & 21570.6         & 3.51249         & 1.1515           & 22568.9          & 22.8333                &                        &                          &                           & 22769.1                      & 22.7895                        & 0.998081749                     \\
                          & myocyte       & 1174.11         & 0.01525             & 1236.59         & 22951.0         & 1233.14         & 7.44508          & 26602.3          & 26.835                 &                        &                          &                           & 41218.6                      & 41.3055                        & 1.539239799                     \\
                          & nn            & 281.083         & 0.0113333           & 4.47975         & 17.0387         & 0.539372        & 0.00916667       & 395.444          & 0.603333               &                        &                          &                           & 464.336                      & 0.493                          & 0.8171275233                    \\
                          & nw            & 651.935         & 0.995917            & 5.83837         & 752.124         & 3.39982         & 1.17775          & 1415.67          & 1.62083                &                        &                          &                           & 1548.73                      & 1.562                          & 0.9637037814                    \\
                          & pathfinder    & 384.321         & 1.57583             & 11.1594         & 782.197         & 1.333           & 1.42308          & 1182.59          & 1.485                  &                        &                          &                           & 1201.24                      & 1.4005                         & 0.9430976431                    \\
                          & srad          & 448.16          & 0.568917            & 5.68372         & 1187.41         & 1.76508         & 1.1525           & 1645.53          & 1.8525                 &                        &                          &                           & 1791.94                      & 1.8195                         & 0.9821862348                    \\
          \hline
\multirow{11}{*}{CUDA+NV} & backprop      & 143.387         & 0.641917            & 6.77417         & 1000.95         & 3.59458         & 31.691           & 1187.53          & 1.29833                & 1270.78                & 1.4475                   & 1.114893748               & 1.38833                      & 1.29833                        & 1.069319819                     \\
                          & bfs           & 146.174         & 0.3755              & 0.653           & 326.941         & 0.07175         & 30.1698          & 504.387          & 0.58                   & 522.175                & 0.598333                 & 1.031608621               & 0.560833                     & 0.58                           & 0.9669534483                    \\
                          & gaussian      & 147.808         & 0.373833            & 3.97325         & 1377.89         & 7.77392         & 30.8378          & 1568.66          & 1.585                  & 1669.4                 & 1.69167                  & 1.067299685               & 1.63833                      & 1.585                          & 1.033646688                     \\
                          & heartwall     & 150.603         & 6.15342             & 23.9508         & 6835.69         & 0.065917        & 38.119           & 7158.26          & 7.1675                 & 7838.79                & 7.8425                   & 1.094175096               & 7.80667                      & 7.1675                         & 1.089176142                     \\
                          & hotspot       & 142.081         & 0.275               & 0.371833        & 622.563         & 0.556           & 29.1363          & 794.983          & 1.0575                 & 818.158                & 1.09333                  & 1.033881797               & 1.0575                       & 1.0575                         & 1                               \\
                          & lud           & 148.657         & 0.149917            & 2.166           & 558.4           & 1.97383         & 32.0442          & 743.392          & 0.756667               & 755.403                & 0.773333                 & 1.022025541               & 0.7375                       & 0.756667                       & 0.9746691742                    \\
                          & needle        & 147.208         & 0.415833            & 4.45092         & 953.582         & 6.35283         & 32.4824          & 1144.5           & 1.1675                 & 1156.11                & 1.18333                  & 1.013558887               & 1.13667                      & 1.1675                         & 0.9735931478                    \\
                          & nn            & 151.194         & 0.263417            & 0.064083        & 0.04            & 0.104833        & 31.5553          & 183.222          & 0.2125                 & 194.514                & 0.22                     & 1.035294118               & 0.184167                     & 0.2125                         & 0.8666682353                    \\
                          & pathfinder    & 146.307         & 0.282583            & 4.9345          & 743.889         & 0.267667        & 31.4093          & 927.092          & 1.03667                & 938.252                & 1.13                     & 1.090028649               & 1.09583                      & 1.03667                        & 1.057067341                     \\
                          & srad\_v1      & 152.472         & 0.618333            & 0.152           & 907.74          & 0.439083        & 29.7765          & 1091.2           & 1.11833                & 1135.87                & 1.16875                  & 1.045085082               & 1.12889                      & 1.11833                        & 1.009442651                     \\
                          & srad\_v2      & 145.68          & 0.712833            & 3.7185          & 871.736         & 3.0595          & 30.5413          & 1181.7           & 1.18667                & 1275.62                & 1.27889                  & 1.077713265               & 1.25833                      & 1.18667                        & 1.060387471
		\end{tabular}
    \end{adjustbox}
    \caption{End-to-end performance data of OpenCL and CUDA. For other APIs we only have the data in Figure~\ref{fig:end2end}. The breakdown indicates the elapsed time for different types of API (in the application on the native). \hyu{I'll measure missing data for AMD-CL and redraw the table if we really need it.}}
\end{table*}
\end{comment}
