% -*- fill-column: 85; -*-
%!TEX root = ../main.tex

\begin{table}
  \centering
\resizebox{\columnwidth}{!}{
  \begin{tabular}{@{}p{1in} p{3in}@{}}
  \toprule
  Type & The value is ... \\
  \midrule
  \spec|type_cast(ty)| & type \spec|ty| and should be cast in the generated code. \\
  \spec|handle| & an API object handle. \\
  \spec|buffer(size)| & a buffer of \spec|size| elements. \\
%  \spec|zerocopy| & an \AvA zero-copy buffer allocated using \spec|zerocopy_alloc|. \\
  \spec|in| & an input and should be copied from the application to the \worker before the call. \\
  \spec|out| & an output and should be copied from the \worker to the application after the call. \\
  \spec|no_copy| & a buffer which should not be copied. Useful when combined with lifetimes. \\
  \spec|lifetime_call| & a buffer which need only exist in the \worker for the length of the call. (default) \\
  \spec|lifetime_manual| & a buffer which should exist in the \worker until it is explicitly deallocated. \\
  \spec|allocate| & a buffer which calls to this function allocate. \\
  \spec|deallocate| & a buffer which calls to this function deallocate. \\
  \spec|zerocopy| & a buffer which should be in zero-copy memory. \\
  \midrule
  \end{tabular}
  }
\resizebox{\columnwidth}{!}{
  \begin{tabular}{@{}p{1in} p{3in}@{}}
  \multicolumn{2}{@{}l}{API Object Recording}\\
  \midrule
  \spec|obj_record| & This call should be recorded and associated with the described value. The recorded calls capture the implicit state of the value. \\
  \spec|obj_depends_on(obj)| & Add a dependency between the described value and \lstinline|obj|, enabling \lstinline|obj| to be recreated if the described value is needed. \\
%  \amp{This really is it. This has no sync implications, since playback is sequential. This is actually almost always inferred, we could actually leave it out of the paper pretty safely.}
  \spec|obj_state_cbs(write, read)| & Attach state serialization and deserialization (\spec|write| and \spec|read|, resp.) functions to the described value. The serialized data captures the explicit state of the value and may be used in combination with implicit state. \\
  \bottomrule
  \end{tabular}
  }
  \caption{\Lapis descriptors for specifying values and objects.}
  \label{tab:lapis-values}
%  \vspace*{-1em}
\end{table}
